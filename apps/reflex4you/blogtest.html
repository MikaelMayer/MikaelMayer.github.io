<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Reflex Embed – Blog Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        color-scheme: dark;
      }
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        margin: 0;
        padding: 2rem;
        background: #0c0c0f;
        color: #f0f0f5;
        line-height: 1.6;
      }
      article {
        max-width: 960px;
        margin: 0 auto;
      }
      h1,
      h2 {
        font-weight: 600;
        margin-bottom: 0.5rem;
      }
      p {
        margin-top: 0;
      }
      .reflex-block {
        border-radius: 16px;
        margin: 1.5rem 0;
        min-height: 320px;
        background: #000;
        position: relative;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
        overflow: hidden;
      }
      .reflex-block--tall {
        min-height: 420px;
      }
      code {
        padding: 0.1rem 0.4rem;
        border-radius: 6px;
        background: rgba(255, 255, 255, 0.08);
        font-size: 0.95em;
      }
      pre {
        background: rgba(255, 255, 255, 0.05);
        padding: 0.9rem;
        border-radius: 10px;
        overflow-x: auto;
        font-size: 0.9em;
        margin-top: 0.75rem;
      }
      .formula-editor {
        width: 100%;
        min-height: 120px;
        margin-top: 0.75rem;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        background: rgba(0, 0, 0, 0.35);
        color: #f8f8ff;
        font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        font-size: 0.95em;
        padding: 0.75rem;
        resize: vertical;
      }
      .code-copy {
        cursor: pointer;
        border: 1px solid rgba(58, 58, 183, 0.4);
        transition: border-color 160ms ease, background 160ms ease;
      }
      .code-copy:hover {
        border-color: rgba(90, 90, 255, 0.8);
        background: rgba(255, 255, 255, 0.08);
      }
      .copy-status {
        font-size: 0.85em;
        color: #7f7fb3;
        margin-top: 0.35rem;
      }
      .copy-status--success {
        color: #71d08c;
      }
      .copy-status--error {
        color: #ff9b71;
      }
      .instructions {
        font-size: 0.95em;
        color: #a3a3c1;
        border-left: 4px solid #3a3ab7;
        padding-left: 0.75rem;
        margin: 1.5rem 0;
      }
    </style>
  </head>
  <body>
    <article>
      <h1>Reflex4You, Now Embeddable Anywhere</h1>
      <p>
        I'm thrilled to say that Reflex4You canvases now drop directly into any blog or site. Each
        frame renders on the reader's device, in real time, using the GPU—no screenshots, no waiting,
        just live complex analysis wherever you publish.
      </p>
      <p>
        If you want to play with formulas before you embed them, head to
        <a href="https://mikaelmayer.github.io/apps/reflex4you/" target="_blank">reflex4you/</a>,
        tweak an expression, and copy the one you like. The embeds below were generated exactly that
        way.
      </p>

      <div class="instructions">
        <p>
          Include the helper script once per page (ideally near the end of <code>body</code>), then
          drop in as many Reflex blocks as you like:
        </p>
        <pre><code>&lt;script type="module" src="https://cdn.jsdelivr.net/gh/MikaelMayer/MikaelMayer.github.io@0.1.0/apps/reflex4you/reflex-embed.js"&gt;&lt;/script&gt;</code></pre>
        <p>
          Now if you want to integrate the Reflex with a specific formula, edit it here and watch the
          embed code update instantly:
        </p>
        <textarea
          class="formula-editor"
          id="liveFormulaInput"
        >(z - (-0.61-2.47i)) * (z - (-0.4-0.92i)) / (z - (-0.34+1.42i)) / 2 $$ 100</textarea>
        <p>You just copy paste the following code into your web page:</p>
        <pre class="code-copy" id="liveEmbedCode"><code id="liveEmbedCodeText"></code></pre>
        <div class="copy-status" id="liveEmbedCopyStatus">Click to copy</div>
        <p>You would then obtain the following display in your blog post:</p>
        <div
          class="reflex-block reflex-block--tall"
          id="liveFormulaPreview"
          reflex-formula="(z - (-0.61-2.47i)) * (z - (-0.4-0.92i)) / (z - (-0.34+1.42i)) / 2 $$ 100"
        ></div>
        <p>
          That's it. Every <code>div</code> with a <code>reflex-formula</code> attribute becomes a
          live canvas driven by the reader's browser.
        </p>
      </div>

      <h2>Classic polynomial</h2>
      <p>
        A simple <code>(z - 1) * (z + 1)</code> sketch shows how cleanly symmetric roots pop when the
        GPU does the shading work on demand.
      </p>
      <div class="reflex-block" reflex-formula="(z - 1) * (z + 1)"></div>
      <pre><code>&lt;div class="reflex-block" reflex-formula="(z - 1) * (z + 1)"&gt;&lt;/div&gt;</code></pre>

      <h2>Rational function</h2>
      <p>
        Taller canvases help when poles and zeros fight for attention. Here
        <code>(z^2 + 1) / (z - i)</code> stretches vertically so the residue glow is easier to read.
      </p>
      <div class="reflex-block reflex-block--tall" reflex-formula="(z ^ 2 + 1) / (z - i)"></div>
      <pre><code>&lt;div class="reflex-block reflex-block--tall" reflex-formula="(z ^ 2 + 1) / (z - i)"&gt;&lt;/div&gt;</code></pre>

      <h2>Quick iterations</h2>
      <p>
        Spontaneous ideas like <code>1 + z</code> deserve their own block too. Paste the formula,
        watch it render instantly, and keep experimenting.
      </p>
      <div class="reflex-block" reflex-formula="1 + z"></div>
      <pre><code>&lt;div class="reflex-block" reflex-formula="1 + z"&gt;&lt;/div&gt;</code></pre>
    </article>

    <script
      type="module"
      src="https://cdn.jsdelivr.net/gh/MikaelMayer/MikaelMayer.github.io@0.1.0/apps/reflex4you/reflex-embed.js"
    ></script>
    <script>
      (function () {
        const formulaInput = document.getElementById('liveFormulaInput');
        const codeBlock = document.getElementById('liveEmbedCode');
        const codeText = document.getElementById('liveEmbedCodeText');
        const copyStatus = document.getElementById('liveEmbedCopyStatus');
        const previewBlock = document.getElementById('liveFormulaPreview');
        if (!formulaInput || !codeBlock || !codeText || !previewBlock || !copyStatus) {
          return;
        }

        const defaultFormula = formulaInput.value.trim();
        const buildEmbedCode = (formula) =>
          `<div class="reflex-block reflex-block--tall" reflex-formula="${formula}"></div>`;

        let latestCode = buildEmbedCode(defaultFormula);
        let resetTimer = null;

        function updateEmbedFromInput() {
          const raw = formulaInput.value;
          const normalized = raw.trim() || defaultFormula;
          previewBlock.setAttribute('reflex-formula', normalized);
          latestCode = buildEmbedCode(normalized);
          codeText.textContent = latestCode;
        }

        function setCopyStatus(message, variant) {
          copyStatus.textContent = message;
          copyStatus.classList.remove('copy-status--success', 'copy-status--error');
          if (variant) {
            copyStatus.classList.add(variant);
          }
          if (resetTimer) {
            clearTimeout(resetTimer);
          }
          resetTimer = setTimeout(() => {
            copyStatus.textContent = 'Click to copy';
            copyStatus.classList.remove('copy-status--success', 'copy-status--error');
          }, 2000);
        }

        formulaInput.addEventListener('input', updateEmbedFromInput);

        codeBlock.addEventListener('click', async () => {
          try {
            await navigator.clipboard.writeText(latestCode);
            setCopyStatus('Copied!', 'copy-status--success');
          } catch (err) {
            setCopyStatus('Press ⌘/Ctrl+C to copy', 'copy-status--error');
          }
        });

        updateEmbedFromInput();

        const bootstrapIfReady = () => {
          if (window.ReflexEmbed?.bootstrap) {
            window.ReflexEmbed.bootstrap();
          }
        };
        window.addEventListener('reflex-embed-ready', bootstrapIfReady, { once: true });
        bootstrapIfReady();
      })();
    </script>
  </body>
</html>
